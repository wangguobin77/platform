{"version":3,"sources":["public/layui.js"],"names":["win","doc","document","config","modules","status","timeout","event","Layui","this","v","getPath","jsPath","currentScript","src","js","scripts","last","length","i","readyState","substring","lastIndexOf","error","msg","console","isOpera","opera","toString","layer","laydate","laypage","laytpl","layim","layedit","form","upload","tree","table","element","util","flow","carousel","code","jquery","mobile","layui.all","prototype","cache","define","deps","factory","that","type","callback","setApp","app","exports","layui","call","use","apps","onScriptLoad","e","url","readyRegExp","navigator","platform","test","currentTarget","srcElement","item","head","removeChild","node","poll","onCallback","setTimeout","push","slice","apply","dir","getElementsByTagName","window","jQuery","fn","on","each","index","splice","$","host","match","location","createElement","base","replace","async","charset","version","Date","getTime","appendChild","attachEvent","indexOf","addEventListener","getStyle","name","style","currentStyle","getComputedStyle","getPropertyValue","link","href","cssname","id","rel","debug","media","getElementById","parseInt","modName","addcss","firename","img","Image","complete","onload","onerror","options","key","clone","o","extend","router","hash","data","path","search","split","settings","storage","localStorage","JSON","parse","value","remove","stringify","sessionData","sessionStorage","device","agent","userAgent","toLowerCase","getVersion","label","exp","RegExp","result","os","ie","ActiveXObject","weixin","android","ios","hint","obj","constructor","Object","sort","desc","o1","o2","isNum","v1","v2","parseFloat","reverse","stope","thisEvent","stopPropagation","cancelBubble","onevent","events","params","filter","eventName","filterName","_","res"],"mappings":"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","file":"layui.js","sourcesContent":["/*!\r\n\r\n @Title: Layui\r\n @Description：经典模块化前端框架\r\n @Site: www.layui.com\r\n @Author: 贤心\r\n @License：MIT\r\n\r\n */\r\n \r\n;!function(win){\r\n  \"use strict\";\r\n\r\n  var doc = document, config = {\r\n    modules: {} //记录模块物理路径\r\n    ,status: {} //记录模块加载状态\r\n    ,timeout: 10 //符合规范的模块请求最长等待秒数\r\n    ,event: {} //记录模块自定义事件\r\n  }\r\n\r\n  ,Layui = function(){\r\n    this.v = '2.2.5'; //版本号\r\n  }\r\n\r\n  //获取layui所在目录\r\n  ,getPath = function(){\r\n    var jsPath = doc.currentScript ? doc.currentScript.src : function(){\r\n      var js = doc.scripts\r\n      ,last = js.length - 1\r\n      ,src;\r\n      for(var i = last; i > 0; i--){\r\n        if(js[i].readyState === 'interactive'){\r\n          src = js[i].src;\r\n          break;\r\n        }\r\n      }\r\n      return src || js[last].src;\r\n    }();\r\n    return jsPath.substring(0, jsPath.lastIndexOf('/') + 1);\r\n  }()\r\n\r\n  //异常提示\r\n  ,error = function(msg){\r\n    win.console && console.error && console.error('Layui hint: ' + msg);\r\n  }\r\n\r\n  ,isOpera = typeof opera !== 'undefined' && opera.toString() === '[object Opera]'\r\n\r\n  //内置模块\r\n  ,modules = {\r\n    layer: 'modules/layer' //弹层\r\n    ,laydate: 'modules/laydate' //日期\r\n    ,laypage: 'modules/laypage' //分页\r\n    ,laytpl: 'modules/laytpl' //模板引擎\r\n    ,layim: 'modules/layim' //web通讯\r\n    ,layedit: 'modules/layedit' //富文本编辑器\r\n    ,form: 'modules/form' //表单集\r\n    ,upload: 'modules/upload' //上传\r\n    ,tree: 'modules/tree' //树结构\r\n    ,table: 'modules/table' //表格\r\n    ,element: 'modules/element' //常用元素操作\r\n    ,util: 'modules/util' //工具块\r\n    ,flow: 'modules/flow' //流加载\r\n    ,carousel: 'modules/carousel' //轮播\r\n    ,code: 'modules/code' //代码修饰器\r\n    ,jquery: 'modules/jquery' //DOM库（第三方）\r\n    \r\n    ,mobile: 'modules/mobile' //移动大模块 | 若当前为开发目录，则为移动模块入口，否则为移动模块集合\r\n    ,'layui.all': '../layui.all' //PC模块合并版\r\n  };\r\n\r\n  //记录基础数据\r\n  Layui.prototype.cache = config;\r\n\r\n  //定义模块\r\n  Layui.prototype.define = function(deps, factory){\r\n    var that = this\r\n    ,type = typeof deps === 'function'\r\n    ,callback = function(){\r\n      var setApp = function(app, exports){\r\n        layui[app] = exports;\r\n        config.status[app] = true;\r\n      };\r\n      typeof factory === 'function' && factory(function(app, exports){\r\n        setApp(app, exports);\r\n        config.callback[app] = function(){\r\n          factory(setApp);\r\n        }\r\n      });\r\n      return this;\r\n    };\r\n    \r\n    type && (\r\n      factory = deps,\r\n      deps = []\r\n    );\r\n    \r\n    if(layui['layui.all'] || (!layui['layui.all'] && layui['layui.mobile'])){\r\n      return callback.call(that);\r\n    }\r\n\r\n    that.use(deps, callback);\r\n    return that;\r\n  };\r\n\r\n  //使用特定模块\r\n  Layui.prototype.use = function(apps, callback, exports){\r\n    var that = this\r\n    ,dir = config.dir = config.dir ? config.dir : getPath\r\n    ,head = doc.getElementsByTagName('head')[0];\r\n\r\n    apps = typeof apps === 'string' ? [apps] : apps;\r\n    \r\n    //如果页面已经存在jQuery1.7+库且所定义的模块依赖jQuery，则不加载内部jquery模块\r\n    if(window.jQuery && jQuery.fn.on){\r\n      that.each(apps, function(index, item){\r\n        if(item === 'jquery'){\r\n          apps.splice(index, 1);\r\n        }\r\n      });\r\n      layui.jquery = layui.$ = jQuery;\r\n    }\r\n    \r\n    var item = apps[0]\r\n    ,timeout = 0;\r\n    exports = exports || [];\r\n\r\n    //静态资源host\r\n    config.host = config.host || (dir.match(/\\/\\/([\\s\\S]+?)\\//)||['//'+ location.host +'/'])[0];\r\n    \r\n    //加载完毕\r\n    function onScriptLoad(e, url){\r\n      var readyRegExp = navigator.platform === 'PLaySTATION 3' ? /^complete$/ : /^(complete|loaded)$/\r\n      if (e.type === 'load' || (readyRegExp.test((e.currentTarget || e.srcElement).readyState))) {\r\n        config.modules[item] = url;\r\n        head.removeChild(node);\r\n        (function poll() {\r\n          if(++timeout > config.timeout * 1000 / 4){\r\n            return error(item + ' is not a valid module');\r\n          };\r\n          config.status[item] ? onCallback() : setTimeout(poll, 4);\r\n        }());\r\n      }\r\n    }\r\n    \r\n    //回调\r\n    function onCallback(){\r\n      exports.push(layui[item]);\r\n      apps.length > 1 ?\r\n        that.use(apps.slice(1), callback, exports)\r\n      : ( typeof callback === 'function' && callback.apply(layui, exports) );\r\n    }\r\n    \r\n    //如果使用了 layui.all.js\r\n    if(apps.length === 0 \r\n    || (layui['layui.all'] && modules[item]) \r\n    || (!layui['layui.all'] && layui['layui.mobile'] && modules[item])\r\n    ){\r\n      return onCallback(), that;\r\n    }\r\n\r\n    //首次加载模块\r\n    if(!config.modules[item]){\r\n      var node = doc.createElement('script')\r\n      \r\n      //如果是内置模块，则按照 dir 参数拼接模块路径\r\n      //如果是扩展模块，则判断模块路径值是否为 {/} 开头，\r\n      //如果路径值是 {/} 开头，则模块路径即为后面紧跟的字符。\r\n      //否则，则按照 base 参数拼接模块路径\r\n      ,url = ( modules[item] ? (dir + 'lay/') \r\n        : (/^\\{\\/\\}/.test(that.modules[item]) ? '' : (config.base || ''))\r\n      ) + (that.modules[item] || item) + '.js';\r\n      \r\n      url = url.replace(/^\\{\\/\\}/, '');\r\n      \r\n      node.async = true;\r\n      node.charset = 'utf-8';\r\n      node.src = url + function(){\r\n        var version = config.version === true \r\n        ? (config.v || (new Date()).getTime())\r\n        : (config.version||'');\r\n        return version ? ('?v=' + version) : '';\r\n      }();\r\n      \r\n      head.appendChild(node);\r\n      \r\n      if(node.attachEvent && !(node.attachEvent.toString && node.attachEvent.toString().indexOf('[native code') < 0) && !isOpera){\r\n        node.attachEvent('onreadystatechange', function(e){\r\n          onScriptLoad(e, url);\r\n        });\r\n      } else {\r\n        node.addEventListener('load', function(e){\r\n          onScriptLoad(e, url);\r\n        }, false);\r\n      }\r\n      \r\n      config.modules[item] = url;\r\n    } else { //缓存\r\n      (function poll() {\r\n        if(++timeout > config.timeout * 1000 / 4){\r\n          return error(item + ' is not a valid module');\r\n        };\r\n        (typeof config.modules[item] === 'string' && config.status[item]) \r\n        ? onCallback() \r\n        : setTimeout(poll, 4);\r\n      }());\r\n    }\r\n    \r\n    return that;\r\n  };\r\n\r\n  //获取节点的style属性值\r\n  Layui.prototype.getStyle = function(node, name){\r\n    var style = node.currentStyle ? node.currentStyle : win.getComputedStyle(node, null);\r\n    return style[style.getPropertyValue ? 'getPropertyValue' : 'getAttribute'](name);\r\n  };\r\n\r\n  //css外部加载器\r\n  Layui.prototype.link = function(href, fn, cssname){\r\n    var that = this\r\n    ,link = doc.createElement('link')\r\n    ,head = doc.getElementsByTagName('head')[0];\r\n    \r\n    if(typeof fn === 'string') cssname = fn;\r\n    \r\n    var app = (cssname || href).replace(/\\.|\\//g, '')\r\n    ,id = link.id = 'layuicss-'+app\r\n    ,timeout = 0;\r\n    \r\n    link.rel = 'stylesheet';\r\n    link.href = href + (config.debug ? '?v='+new Date().getTime() : '');\r\n    link.media = 'all';\r\n    \r\n    if(!doc.getElementById(id)){\r\n      head.appendChild(link);\r\n    }\r\n\r\n    if(typeof fn !== 'function') return that;\r\n    \r\n    //轮询css是否加载完毕\r\n    (function poll() {\r\n      if(++timeout > config.timeout * 1000 / 100){\r\n        return error(href + ' timeout');\r\n      };\r\n      parseInt(that.getStyle(doc.getElementById(id), 'width')) === 1989 ? function(){\r\n        fn();\r\n      }() : setTimeout(poll, 100);\r\n    }());\r\n    \r\n    return that;\r\n  };\r\n  \r\n  //存储模块的回调\r\n  config.callback = {};\r\n  \r\n  //重新执行模块的工厂函数\r\n  Layui.prototype.factory = function(modName){\r\n    if(layui[modName]){\r\n      return typeof config.callback[modName] === 'function' \r\n        ? config.callback[modName]\r\n      : null;\r\n    }\r\n  };\r\n\r\n  //css内部加载器\r\n  Layui.prototype.addcss = function(firename, fn, cssname){\r\n    return layui.link(config.dir + 'css/' + firename, fn, cssname);\r\n  };\r\n\r\n  //图片预加载\r\n  Layui.prototype.img = function(url, callback, error) {   \r\n    var img = new Image();\r\n    img.src = url; \r\n    if(img.complete){\r\n      return callback(img);\r\n    }\r\n    img.onload = function(){\r\n      img.onload = null;\r\n      callback(img);\r\n    };\r\n    img.onerror = function(e){\r\n      img.onerror = null;\r\n      error(e);\r\n    };  \r\n  };\r\n\r\n  //全局配置\r\n  Layui.prototype.config = function(options){\r\n    options = options || {};\r\n    for(var key in options){\r\n      config[key] = options[key];\r\n    }\r\n    return this;\r\n  };\r\n\r\n  //记录全部模块\r\n  Layui.prototype.modules = function(){\r\n    var clone = {};\r\n    for(var o in modules){\r\n      clone[o] = modules[o];\r\n    }\r\n    return clone;\r\n  }();\r\n\r\n  //拓展模块\r\n  Layui.prototype.extend = function(options){\r\n    var that = this;\r\n\r\n    //验证模块是否被占用\r\n    options = options || {};\r\n    for(var o in options){\r\n      if(that[o] || that.modules[o]){\r\n        error('\\u6A21\\u5757\\u540D '+ o +' \\u5DF2\\u88AB\\u5360\\u7528');\r\n      } else {\r\n        that.modules[o] = options[o];\r\n      }\r\n    }\r\n\r\n    return that;\r\n  };\r\n\r\n  //路由解析\r\n  Layui.prototype.router = function(hash){\r\n    var that = this\r\n    ,hash = hash || location.hash\r\n    ,data = {\r\n      path: []\r\n      ,search: {}\r\n      ,hash: (hash.match(/[^#](#.*$)/) || [])[1] || ''\r\n    };\r\n    \r\n    if(!/^#\\//.test(hash)) return data; //禁止非路由规范\r\n    data.href = hash = hash.replace(/^#\\//, '');\r\n    hash = hash.replace(/([^#])(#.*$)/, '$1').split('/') || [];\r\n    \r\n    //提取Hash结构\r\n    that.each(hash, function(index, item){\r\n      /^\\w+=/.test(item) ? function(){\r\n        item = item.split('=');\r\n        data.search[item[0]] = item[1];\r\n      }() : data.path.push(item);\r\n    });\r\n    \r\n    return data;\r\n  };\r\n\r\n  //本地持久性存储\r\n  Layui.prototype.data = function(table, settings, storage){\r\n    table = table || 'layui';\r\n    storage = storage || localStorage;\r\n    \r\n    if(!win.JSON || !win.JSON.parse) return;\r\n    \r\n    //如果settings为null，则删除表\r\n    if(settings === null){\r\n      return delete storage[table];\r\n    }\r\n    \r\n    settings = typeof settings === 'object' \r\n      ? settings \r\n    : {key: settings};\r\n    \r\n    try{\r\n      var data = JSON.parse(storage[table]);\r\n    } catch(e){\r\n      var data = {};\r\n    }\r\n    \r\n    if('value' in settings) data[settings.key] = settings.value;\r\n    if(settings.remove) delete data[settings.key];\r\n    storage[table] = JSON.stringify(data);\r\n    \r\n    return settings.key ? data[settings.key] : data;\r\n  };\r\n  \r\n  //本地会话性存储\r\n  Layui.prototype.sessionData = function(table, settings){\r\n    return this.data(table, settings, sessionStorage);\r\n  }\r\n\r\n  //设备信息\r\n  Layui.prototype.device = function(key){\r\n    var agent = navigator.userAgent.toLowerCase()\r\n\r\n    //获取版本号\r\n    ,getVersion = function(label){\r\n      var exp = new RegExp(label + '/([^\\\\s\\\\_\\\\-]+)');\r\n      label = (agent.match(exp)||[])[1];\r\n      return label || false;\r\n    }\r\n    \r\n    //返回结果集\r\n    ,result = {\r\n      os: function(){ //底层操作系统\r\n        if(/windows/.test(agent)){\r\n          return 'windows';\r\n        } else if(/linux/.test(agent)){\r\n          return 'linux';\r\n        } else if(/iphone|ipod|ipad|ios/.test(agent)){\r\n          return 'ios';\r\n        } else if(/mac/.test(agent)){\r\n          return 'mac';\r\n        } \r\n      }()\r\n      ,ie: function(){ //ie版本\r\n        return (!!win.ActiveXObject || \"ActiveXObject\" in win) ? (\r\n          (agent.match(/msie\\s(\\d+)/) || [])[1] || '11' //由于ie11并没有msie的标识\r\n        ) : false;\r\n      }()\r\n      ,weixin: getVersion('micromessenger')  //是否微信\r\n    };\r\n    \r\n    //任意的key\r\n    if(key && !result[key]){\r\n      result[key] = getVersion(key);\r\n    }\r\n    \r\n    //移动设备\r\n    result.android = /android/.test(agent);\r\n    result.ios = result.os === 'ios';\r\n    \r\n    return result;\r\n  };\r\n\r\n  //提示\r\n  Layui.prototype.hint = function(){\r\n    return {\r\n      error: error\r\n    }\r\n  };\r\n\r\n  //遍历\r\n  Layui.prototype.each = function(obj, fn){\r\n    var key\r\n    ,that = this;\r\n    if(typeof fn !== 'function') return that;\r\n    obj = obj || [];\r\n    if(obj.constructor === Object){\r\n      for(key in obj){\r\n        if(fn.call(obj[key], key, obj[key])) break;\r\n      }\r\n    } else {\r\n      for(key = 0; key < obj.length; key++){\r\n        if(fn.call(obj[key], key, obj[key])) break;\r\n      }\r\n    }\r\n    return that;\r\n  };\r\n\r\n  //将数组中的对象按其某个成员排序\r\n  Layui.prototype.sort = function(obj, key, desc){\r\n    var clone = JSON.parse(\r\n      JSON.stringify(obj || [])\r\n    );\r\n    \r\n    if(!key) return clone;\r\n    \r\n    //如果是数字，按大小排序，如果是非数字，按字典序排序\r\n    clone.sort(function(o1, o2){\r\n      var isNum = /^-?\\d+$/\r\n      ,v1 = o1[key]\r\n      ,v2 = o2[key];\r\n      \r\n      if(isNum.test(v1)) v1 = parseFloat(v1);\r\n      if(isNum.test(v2)) v2 = parseFloat(v2);\r\n      \r\n      if(v1 && !v2){\r\n        return 1;\r\n      } else if(!v1 && v2){\r\n        return -1;\r\n      }\r\n        \r\n      if(v1 > v2){\r\n        return 1;\r\n      } else if (v1 < v2) {\r\n        return -1;\r\n      } else {\r\n        return 0;\r\n      }\r\n    });\r\n\r\n    desc && clone.reverse(); //倒序\r\n    return clone;\r\n  };\r\n\r\n  //阻止事件冒泡\r\n  Layui.prototype.stope = function(thisEvent){\r\n    thisEvent = thisEvent || win.event;\r\n    try { thisEvent.stopPropagation() } catch(e){\r\n      thisEvent.cancelBubble = true;\r\n    }\r\n  };\r\n\r\n  //自定义模块事件\r\n  Layui.prototype.onevent = function(modName, events, callback){\r\n    if(typeof modName !== 'string' \r\n    || typeof callback !== 'function') return this;\r\n\r\n    return Layui.event(modName, events, null, callback);\r\n  };\r\n\r\n  //执行自定义模块事件\r\n  Layui.prototype.event = Layui.event = function(modName, events, params, fn){\r\n    var that = this\r\n    ,result = null\r\n    ,filter = events.match(/\\((.*)\\)$/)||[] //提取事件过滤器字符结构，如：select(xxx)\r\n    ,eventName = (modName + '.'+ events).replace(filter[0], '') //获取事件名称，如：form.select\r\n    ,filterName = filter[1] || '' //获取过滤器名称,，如：xxx\r\n    ,callback = function(_, item){\r\n      var res = item && item.call(that, params);\r\n      res === false && result === null && (result = false);\r\n    };\r\n    \r\n    //添加事件\r\n    if(fn){\r\n      config.event[eventName] = config.event[eventName] || {};\r\n\r\n      //这里不再对多次事件监听做支持，避免更多麻烦\r\n      //config.event[eventName][filterName] ? config.event[eventName][filterName].push(fn) : \r\n      config.event[eventName][filterName] = [fn];\r\n      return this;\r\n    }\r\n    \r\n    //执行事件回调\r\n    layui.each(config.event[eventName], function(key, item){\r\n      //执行当前模块的全部事件\r\n      if(filterName === '{*}'){\r\n        layui.each(item, callback);\r\n        return;\r\n      }\r\n      \r\n      //执行指定事件\r\n      key === '' && layui.each(item, callback);\r\n      key === filterName && layui.each(item, callback);\r\n    });\r\n    \r\n    return result;\r\n  };\r\n\r\n  win.layui = new Layui();\r\n  \r\n}(window);\r\n\r\n"]}