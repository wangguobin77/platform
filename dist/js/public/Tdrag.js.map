{"version":3,"sources":["public/Tdrag.js"],"names":["$","window","document","undefined","jQuery","fn","Tdrag","opt","call","scope","grid","axis","pos","handle","moveClass","dragChange","changeMode","cbStart","cbMove","cbEnd","random","randomInput","animation_options","duration","easing","disable","disableInput","dragfn","Dragfn","this","isEmptyObject","options","extend","firstRandom","ele","$element","pack","bind","loadJqueryfn","prototype","init","obj","self","_start","_move","_end","disX","disY","zIndex","moving","moves","box","type","find","on","ev","start","setCapture","move","end","sortBox","arr","s","length","push","eq","i","j","Number","attr","temp","randomfn","disable_open","disable_cloose","toDisable","moved","oEvent","event","clientX","offsetLeft","clientY","offsetTop","css","l","t","rule","collTestBox","lmax","lmin","tmax","tmin","style","left","top","moveAddClass","sortDrag","pointDrag","animation","aPos","unbind","releaseCapture","obj2","l1","t1","l2","innerWidth","outerWidth","t2","innerHeight","outerHeight","json","isArray","gx","gy","Math","floor","console","log","findNearest","iMin","Date","getTime","iMinIndex","collTest","dis","getDis","offsetWidth","offsetHeight","a","b","sqrt","r1","b1","r2","b2","click","n","rnd","finInArr","sortarr","oNear","removeClass","hasClass","addClass","sort","arr_li","tmp","changeWhen","obj_tmp","count","round","name","parseFloat","getStyle","isNaN","clearInterval","timer","setInterval","cur","opacity","filter","complete","currentStyle","getComputedStyle","m","parseInt"],"mappings":"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","file":"Tdrag.js","sourcesContent":["\n;(function($,window,document,undefined){\n    jQuery(function() {\n\n        $.fn.Tdrag = function (opt) {\n            var call = {\n                scope: null,//父级\n                grid: null,//网格\n                axis:\"all\",//上下或者左右\n                pos:false,//是否记住位置\n                handle:null,//手柄\n                moveClass:\"tezml\",//移动时不换位加的class\n                dragChange:false,//是否开启拖拽换位\n                changeMode:\"point\",//point & sort\n                cbStart:function(){},//移动前的回调函数\n                cbMove:function(){},//移动中的回调函数\n                cbEnd:function(){},//移动结束时候的回调函数\n                random:false,//是否自动随机排序\n                randomInput:null,//点击随机排序的按钮\n                animation_options:{//运动时的参数\n                    duration:800,//每次运动的时间\n                    easing:\"ease-out\"//移动时的特效，ease-out、ease-in、linear\n                },\n                disable:false,//禁止拖拽\n                disableInput:null//禁止拖拽的按钮\n            };\n            var dragfn = new Dragfn(this, opt);\n            if (opt && $.isEmptyObject(opt) == false) {\n                dragfn.options = $.extend(call, opt);\n            } else {\n                dragfn.options = call;\n            }\n            dragfn.firstRandom=true;\n            var ele = dragfn.$element;\n            dragfn.pack(ele,false);\n            if(dragfn.options.randomInput!=null){\n                $(dragfn.options.randomInput).bind(\"click\",function(){\n                    dragfn.pack(ele,true);\n                })\n            }\n            //加载拓展jquery的函数\n            dragfn.loadJqueryfn()\n        };\n\n        //依赖构造函数\n        var Dragfn = function (ele, opt) {\n            this.$element = ele;\n            this.options = opt;\n        };\n        //构造函数方法\n        Dragfn.prototype = {\n            init: function (obj) {\n                var self = this;\n                self.ele=self.$element;\n                self.handle=$(obj);//手柄\n                self.options = self.options;\n                self.disable = self.options.disable;\n                self._start = false;\n                self._move = false;\n                self._end = false;\n                self.disX = 0;\n                self.disY = 0;\n                self.zIndex=1000;\n                self.moving=false;\n                self.moves=\"\";\n\n\n                //父级\n                self.box = $.type(self.options.scope)===\"string\" ? self.options.scope : null;\n                //手柄\n                if(self.options.handle!=null){\n                    self.handle=$(obj).find(self.options.handle);\n                }\n\n                //三个事件\n                self.handle.on(\"mousedown\", function (ev) {\n                    self.start(ev, obj);\n                    obj.setCapture && obj.setCapture();\n                    return false;\n                });\n                if(self.options.dragChange) {\n                    $(obj).on(\"mousemove\", function (ev) {\n                        self.move(ev, obj);\n                    });\n                    $(obj).on(\"mouseup\", function (ev) {\n                        self.end(ev, obj);\n                    });\n                }else{\n                    $(document).on(\"mousemove\", function (ev) {\n                        self.move(ev, obj);\n                    });\n                    $(document).on(\"mouseup\", function (ev) {\n                        self.end(ev, obj);\n                    });\n                }\n            },\n            //jquery调取函数时候用\n            loadJqueryfn: function(){\n                var self=this;\n                $.extend({\n                    //返回按照index排序的回调函数\n                    sortBox:function(obj){\n                        var arr=[];\n                        for (var s = 0; s < $(obj).length; s++) {\n                            arr.push($(obj).eq(s));\n                        }\n                        for ( var i = 0; i < arr.length; i++) {\n                            for ( var j = i + 1; j < arr.length; j++) {\n                                if(Number(arr[i].attr(\"index\")) > Number(arr[j].attr(\"index\"))){\n                                    var temp = arr[i];\n                                    arr[i] = arr[j];\n                                    arr[j] = temp;\n                                }\n                            }\n                        }\n                        return arr\n                    },\n                    //随机排序函数\n                    randomfn:function(obj){\n                        self.pack($(obj),true);\n                    },\n                    //开启拖拽\n                    disable_open:function(){\n                        self.disable=false;\n                    },\n                    //禁止拖拽\n                    disable_cloose:function(){\n                        self.disable=true;\n                    }\n                });\n            },\n            toDisable: function(){\n                var self=this;\n                if(self.options.disableInput!=null){\n                    $(self.options.disableInput).bind(\"click\",function(){\n                        if(self.disable==true){\n                            self.disable=false\n                        }else{\n                            self.disable=true\n                        }\n                    })\n                }\n            },\n            start: function (ev, obj) {\n                var self = this;\n                self.moved=obj;\n                if (self.disable == true) {\n                    return false\n                }\n                self._start = true;\n                var oEvent = ev || event;\n                self.disX = oEvent.clientX - obj.offsetLeft;\n                self.disY = oEvent.clientY - obj.offsetTop;\n                $(obj).css(\"zIndex\",self.zIndex++);\n                self.options.cbStart();\n            },\n            move: function (ev, obj) {\n                var self = this;\n                if (self._start != true) {\n                    return false\n                }\n                if(obj!=self.moved){\n                    return false\n                }\n                self._move = true;\n                var oEvent = ev || event;\n                var l = oEvent.clientX - self.disX;\n                var t = oEvent.clientY - self.disY;\n                //有父级限制\n                if (self.box != null) {\n                    var rule = self.collTestBox(obj,self.box);\n                    if (l > rule.lmax) {\n                        l = rule.lmax;\n                    } else if (l < rule.lmin) {\n                        l = rule.lmin;\n                    }\n                    if (t > rule.tmax) {\n                        t = rule.tmax;\n                    } else if (t < rule.tmin) {\n                        t = rule.tmin;\n                    }\n                }\n                if(self.options.axis==\"all\"){\n                    obj.style.left = self.grid(obj, l, t).left  + 'px';\n                    obj.style.top = self.grid(obj, l, t).top  + 'px';\n                }else if(self.options.axis==\"y\"){\n                    obj.style.top = self.grid(obj, l, t).top  + 'px';\n                }else if(self.options.axis==\"x\"){\n                    obj.style.left = self.grid(obj, l, t).left + 'px';\n                }\n               /* if(self.options.changeWhen==\"move\") {\n                    if (self.options.changeMode == \"sort\") {\n                        self.sortDrag(obj);\n                    } else if (self.options.changeMode == \"point\") {\n                        self.pointmoveDrag(obj);\n                    }\n                }else{\n                    self.moveAddClass(obj);\n                }*/\n                if(self.options.pos==true){\n                    self.moveAddClass(obj);\n                }\n                self.options.cbMove(obj,self);\n\n            },\n            end: function (ev, obj) {\n                var self = this;\n                if (self._start != true) {\n                    return false\n                }\n                if(self.options.changeMode==\"sort\"&&self.options.pos==true){\n                    self.sortDrag(obj);\n                }else if(self.options.changeMode==\"point\"&&self.options.pos==true){\n                    self.pointDrag(obj);\n                }\n                if(self.options.pos==true){\n                    self.animation(obj, self.aPos[$(obj).attr(\"index\")]);\n                }\n                self.options.cbEnd();\n                if(self.options.handle!=null){\n                    $(obj).find(self.options.handle).unbind(\"onmousemove\");\n                    $(obj).find(self.options.handle).unbind(\"onmouseup\");\n                }else{\n                    $(obj).unbind(\"onmousemove\");\n                    $(obj).unbind(\"onmouseup\");\n                }\n                obj.releaseCapture && obj.releaseCapture();\n                self._start = false;\n\n            },\n            //算父级的宽高\n            collTestBox: function (obj, obj2) {\n                var self = this;\n                var l1 = 0;\n                var t1 = 0;\n                var l2 = $(obj2).innerWidth() - $(obj).outerWidth();\n                var t2 = $(obj2).innerHeight() - $(obj).outerHeight();\n                return {\n                    lmin: l1,//取的l最小值\n                    tmin: t1,//取的t最小值\n                    lmax: l2,//取的l最大值\n                    tmax: t2//取的t最大值\n                }\n\n            },\n            //算父级宽高时候干掉margin\n            grid: function (obj, l, t) {//cur:[width,height]\n                var self = this;\n                var json = {\n                    left: l,\n                    top: t\n                };\n                if ($.isArray(self.options.grid) && self.options.grid.length == 2) {\n                    var gx = self.options.grid[0];\n                    var gy = self.options.grid[1];\n                    json.left = Math.floor((l + gx / 2) / gx) * gx;\n                    json.top = Math.floor((t + gy / 2) / gy) * gy;\n                    return json\n                } else if (self.options.grid == null) {\n                    return json\n                } else {\n                    console.log(\"grid参数传递格式错误\");\n                    return false\n                }\n            },\n            findNearest: function(obj){\n                var self=this;\n                var iMin=new Date().getTime();\n                var iMinIndex=-1;\n                var ele=self.ele;\n                for(var i=0;i<ele.length;i++){\n                    if(obj==ele[i]){\n                        continue;\n                    }\n                    if(self.collTest(obj,ele[i])){\n                        var dis=self.getDis(obj,ele[i]);\n                        if(dis<iMin){\n                            iMin=dis;\n                            iMinIndex=i;\n                        }\n                    }\n                }\n                if(iMinIndex==-1){\n                    return null;\n                }else{\n                    return ele[iMinIndex];\n                }\n        },\n            getDis: function(obj,obj2){\n                var self=this;\n                var l1=obj.offsetLeft+obj.offsetWidth/2;\n                var l2=obj2.offsetLeft+obj2.offsetWidth/2;\n\n                var t1=obj.offsetTop+obj.offsetHeight/2;\n                var t2=obj2.offsetTop+obj2.offsetHeight/2;\n\n                var a=l2-l1;\n                var b=t1-t2;\n\n            return Math.sqrt(a*a+b*b);\n        },\n            collTest: function(obj,obj2){\n                var self=this;\n                var l1=obj.offsetLeft;\n                var r1=obj.offsetLeft+obj.offsetWidth;\n                var t1=obj.offsetTop;\n                var b1=obj.offsetTop+obj.offsetHeight;\n\n                var l2=obj2.offsetLeft;\n                var r2=obj2.offsetLeft+obj2.offsetWidth;\n                var t2=obj2.offsetTop;\n                var b2=obj2.offsetTop+obj2.offsetHeight;\n\n                if(r1<l2 || r2<l1 || t2>b1 || b2<t1){\n                    return false;\n                }else{\n                    return true;\n                }\n        },\n            //初始布局转换\n            pack: function(ele,click){\n                var self=this;\n                self.toDisable();\n                if(self.options.pos==false){\n                    for (var i = 0; i < ele.length; i++) {\n                        $(ele[i]).css(\"position\", \"absolute\");\n                        $(ele[i]).css(\"margin\", \"0\");\n                        self.init(ele[i]);\n                    }\n                }else if(self.options.pos==true) {\n                    var arr = [];\n                    if (self.options.random || click) {\n                        while (arr.length < ele.length) {\n                            var n = self.rnd(0, ele.length);\n                            if (!self.finInArr(arr, n)) {//没找到\n                                arr.push(n);\n                            }\n                        }\n                    }\n                    if (self.options.random == false || click != true) {\n                        var n = 0;\n                        while (arr.length < ele.length) {\n                            arr.push(n);\n                            n++\n                        }\n                    }\n\n                    //如果是第二次以后随机列表，那就重新排序后再随机，因为我智商不够使，不会排了\n                    if (self.firstRandom == false) {\n                        var sortarr = [];\n                        var n = 0;\n                        while (sortarr.length < ele.length) {\n                            sortarr.push(n);\n                            n++\n                        }\n                        for (var i = 0; i < ele.length; i++) {\n                            $(ele[i]).attr(\"index\", sortarr[i]);\n                            $(ele[i]).css(\"left\", self.aPos[sortarr[i]].left);\n                            $(ele[i]).css(\"top\", self.aPos[sortarr[i]].top);\n                        }\n                    }\n\n                    //布局转化\n                    self.aPos = [];\n                    if (self.firstRandom == false) {\n                        //不是第一次\n                        for (var j = 0; j < ele.length; j++) {\n                            self.aPos[j] = {\n                                left: ele[$(ele).eq(j).attr(\"index\")].offsetLeft,\n                                top: ele[$(ele).eq(j).attr(\"index\")].offsetTop\n                            };\n                        }\n                    } else {\n                        //第一次\n                        for (var j = 0; j < ele.length; j++) {\n                            self.aPos[j] = {left: ele[j].offsetLeft, top: ele[j].offsetTop};\n                        }\n                    }\n                    //第二个循环布局转化\n                    for (var i = 0; i < ele.length; i++) {\n                        $(ele[i]).attr(\"index\", arr[i]);\n                        $(ele[i]).css(\"left\", self.aPos[arr[i]].left);\n                        $(ele[i]).css(\"top\", self.aPos[arr[i]].top);\n                        $(ele[i]).css(\"position\", \"absolute\");\n                        $(ele[i]).css(\"margin\", \"0\");\n                        self.init(ele[i]);\n                    }\n                    self.firstRandom = false;\n                }\n            },\n            //移动时候加class\n            moveAddClass: function(obj){\n                var self=this;\n                var oNear=self.findNearest(obj);\n                $(self.$element).removeClass(self.options.moveClass);\n                if(oNear && $(oNear).hasClass(self.options.moveClass)==false){\n                    $(oNear).addClass(self.options.moveClass);\n                }\n\n            },\n            //给li排序\n            sort: function(){\n                var self=this;\n                var arr_li=[];\n                for (var s = 0; s < self.$element.length; s++) {\n                    arr_li.push(self.$element[s]);\n                }\n                for ( var i = 0; i < arr_li.length; i++) {\n                    for ( var j = i + 1; j < arr_li.length; j++) {\n                        if(Number($(arr_li[i]).attr(\"index\")) > Number($(arr_li[j]).attr(\"index\"))){\n                            var temp = arr_li[i];\n                            arr_li[i] = arr_li[j];\n                            arr_li[j] = temp;\n                        }\n                    }\n                }\n                return arr_li;\n            },\n            //点对点的方式换位\n            pointDrag: function(obj){\n                var self=this;\n                //先拍序\n                var oNear=self.findNearest(obj);\n                if (oNear) {\n                    self.animation(obj,self.aPos[$(oNear).attr(\"index\")]);\n                    self.animation(oNear, self.aPos[$(obj).attr(\"index\")]);\n                    var tmp;\n                    tmp = $(obj).attr(\"index\");\n                    $(obj).attr(\"index\", $(oNear).attr(\"index\"));\n                    $(oNear).attr(\"index\", tmp);\n                    $(oNear).removeClass(self.options.moveClass);\n                } else if (self.options.changeWhen == \"end\") {\n                    self.animation(obj, self.aPos[$(obj).attr(\"index\")]);\n                }\n\n            },\n            //排序的方式换位\n            sortDrag: function(obj){\n                var self=this;\n                //先拍序\n                var arr_li=self.sort();\n                //换位置\n                var oNear=self.findNearest(obj);\n                    if(oNear){\n                        if(Number($(oNear).attr(\"index\"))>Number($(obj).attr(\"index\"))){\n                            //前换后\n                            var obj_tmp=Number($(obj).attr(\"index\"));\n                            $(obj).attr(\"index\",Number($(oNear).attr(\"index\"))+1);\n                            for (var i = obj_tmp; i < Number($(oNear).attr(\"index\"))+1; i++) {\n                                self.animation(arr_li[i],self.aPos[i-1]);\n                                self.animation(obj,self.aPos[$(oNear).attr(\"index\")]);\n                                $(arr_li[i]).removeClass(self.options.moveClass);\n                                $(arr_li[i]).attr(\"index\",Number($(arr_li[i]).attr(\"index\"))-1);\n                            }\n\n                        }else if(Number($(obj).attr(\"index\"))>Number($(oNear).attr(\"index\"))){\n                            //后换前\n                            var obj_tmp=Number($(obj).attr(\"index\"));\n                            $(obj).attr(\"index\",$(oNear).attr(\"index\"));\n                            for (var i = Number($(oNear).attr(\"index\")); i < obj_tmp; i++) {\n                                self.animation(arr_li[i],self.aPos[i+1]);\n                                self.animation(obj,self.aPos[Number($(obj).attr(\"index\"))]);\n                                $(arr_li[i]).removeClass(self.options.moveClass);\n                                $(arr_li[i]).attr(\"index\",Number($(arr_li[i]).attr(\"index\"))+1);\n                            }\n                        }\n                    }else{\n                        self.animation(obj,self.aPos[$(obj).attr(\"index\")]);\n                    }\n\n            },\n            //运动函数(后期再加参数)\n            animation: function(obj,json){\n                var self=this;\n                //考虑默认值\n                var options=self.options.animation_options; /*|| {};\n                options.duration=self.options.animation_options.duration || 800;\n                options.easing=options.easing.duration.easing || 'ease-out';*/\n                var self=this;\n                var count=Math.round(options.duration/30);\n                var start={};\n                var dis={};\n                for(var name in json){\n                    start[name]=parseFloat(self.getStyle(obj,name));\n                    if(isNaN(start[name])){\n                        switch(name){\n                            case 'left':\n                                start[name]=obj.offsetLeft;\n                                break;\n                            case 'top':\n                                start[name]=obj.offsetTop;\n                                break;\n                            case 'width':\n                                start[name]=obj.offsetWidth;\n                                break;\n                            case 'height':\n                                start[name]=obj.offsetHeight;\n                                break;\n                            case 'marginLeft':\n                                start[name]=obj.offsetLeft;\n                                break;\n                            case 'borderWidth':\n                                start[name]=0;\n                                break;\n                            //...\n                        }\n                    }\n                    dis[name]=json[name]-start[name];\n                }\n\n                var n=0;\n\n                clearInterval(obj.timer);\n                obj.timer=setInterval(function(){\n                    n++;\n                    for(var name in json){\n                        switch(options.easing){\n                            case 'linear':\n                                var a=n/count;\n                                var cur=start[name]+dis[name]*a;\n                                break;\n                            case 'ease-in':\n                                var a=n/count;\n                                var cur=start[name]+dis[name]*a*a*a;\n                                break;\n                            case 'ease-out':\n                                var a=1-n/count;\n                                var cur=start[name]+dis[name]*(1-a*a*a);\n                                break;\n                        }\n\n                        if(name=='opacity'){\n                            obj.style.opacity=cur;\n                            obj.style.filter='alpha(opacity:'+cur*100+')';\n                        }else{\n                            obj.style[name]=cur+'px';\n                        }\n                    }\n\n                    if(n==count){\n                        clearInterval(obj.timer);\n                        options.complete && options.complete();\n                    }\n                },30);\n        },\n            getStyle: function(obj,name){\n                return (obj.currentStyle || getComputedStyle(obj,false))[name];\n            },\n            //随机数\n            rnd: function(n,m){\n                return parseInt(Math.random()*(m-n)+n);\n            },\n            //在数组中找\n            finInArr: function(arr,n){\n                for(var i = 0 ; i < arr.length; i++){\n                    if(arr[i] == n){//存在\n                        return true;\n                    }\n                }\n                return false;\n            }\n        }\n    })\n})(jQuery,window,document);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"]}