{"version":3,"sources":["public/upload.js"],"names":["imgUpload_sm","obj","vvw","getAttribute","vvh","imgarr","img_none","imgs","$","push","fileData","files","console","log","size","alert","reader","FileReader","onload","e","data","target","result","image","Image","width","height","val","prev","show","html","i","length","undefined","attr","src","readAsDataURL"],"mappings":"AAOA,YAGK,SAASA,cAAaC,GAEpB,GAAIC,GAAID,EAAIE,aAAa,cACrBC,EAAIH,EAAIE,aAAa,eACrBE,KACCC,KACDC,EAAKC,EAAE,QACVH,GAAOI,KAAKF,EAGb,IAAIG,GAAWT,EAAIU,MAAM,EACzBC,SAAQC,IAAIC,EAGZ,IAAIA,GAAOJ,EAASI,KAAO,IAC3B,IAAGA,EAAK,IAEJ,WADAC,OAAM,UAGV,IAAIC,GAAS,GAAIC,WACjBL,SAAQC,IAAIG,GAEZA,EAAOE,OAAS,SAAUC,GAEzB,GAAIC,GAAOD,EAAEE,OAAOC,MACpBV,SAAQC,IAAIO,EAGZ,IAAIG,GAAQ,GAAIC,MAChBD,GAAML,OAAO,WACT,GAAIO,GAAQF,EAAME,MAAM,KACpBC,EAASH,EAAMG,OAAO,IAC1B,IAAGD,GAAOvB,GAAOwB,GAAQtB,EAGrB,MAFAW,OAAM,WAAWb,EAAI,IAAIE,EAAI,OAC7BI,EAAE,wBAAwBmB,IAAI,OACvB,CAEPnB,GAAEP,GAAK2B,KAAK,KAAKC,OACjBrB,EAAEP,GAAK2B,KAAK,KAAKE,KAAK,yEAA+EV,EAAK,UAAUA,EAAK,KAEzH,KAAI,GAAIW,GAAE,EAAEA,EAAE1B,EAAO2B,OAAOD,IACEE,QAAvB5B,EAAO0B,GAAGG,KAAK,SACd5B,EAASG,KAAKJ,EAAO0B,IACrBnB,QAAQC,IAAIP,EAAS0B,UAMrCT,EAAMY,IAAKf,GAIfJ,EAAOoB,cAAc1B","file":"upload.js","sourcesContent":["/*\n* @Author: Marte\n* @Date:   2018-07-17 16:10:41\n* @Last Modified by:   Marte\n* @Last Modified time: 2018-07-30 16:35:37\n*/\n\n'use strict';\n\n//上传商品配图\n     function imgUpload_sm(obj){\n        // console.log(obj);\n       var vvw=obj.getAttribute('data-width');\n       var vvh=obj.getAttribute('data-height');\n       var imgarr=[],\n            img_none=[];\n       var imgs=$('.imgs');\n        imgarr.push(imgs);\n\n\n       var fileData = obj.files[0];\n       console.log(size);\n       // var type=fileData.type;\n       // console.log(type);\n       var size = fileData.size / 1024;\n       if(size>1000){\n           alert(\"附件不能大1M\");\n           return;\n      }\n       var reader = new FileReader();\n       console.log(reader);\n\n       reader.onload = function (e) {\n\n        var data = e.target.result;\n        console.log(data);\n\n        //加载图片获取图片真实宽度和高度\n        var image = new Image();\n        image.onload=function(){\n            var width = image.width+'px';\n            var height = image.height+'px';\n            if(width!=vvw && height!=vvh){\n                alert('规格错误，请上传'+vvw+\"*\"+vvh+'的图片');\n                $('input[name=\"picurl\"]').val(null);\n                return false;\n            }\n                $(obj).prev(\"i\").show();\n                $(obj).prev(\"i\").html(\"<span class='close-icon'>\"+\"</span>\"+\"<img class='img-pic cursor' data-pic='\"+data+\"' src='\"+data+\"'>\");\n\n                for(var i=0;i<imgarr.length;i++){\n                    if(imgarr[i].attr('src')!=undefined){\n                        img_none.push(imgarr[i]);\n                        console.log(img_none.length);\n\n                    }\n\n                }\n        };\n        image.src= data;\n    };\n\n    //读取文件的base64数据\n    reader.readAsDataURL(fileData);\n }"]}