function getAlreadySetSkuVals(){alreadySetSkuVals={},$("tr[class*='sku_table_tr']").each(function(){var s=$(this).find("input[type='text'][class*='setting_sku_price']").val(),t=$(this).find("input[type='text'][class*='setting_sku_stock']").val();if(s||t){var l=$(this).attr("propvalids");alreadySetSkuVals[l]={skuPrice:s,skuStock:t}}})}var alreadySetSkuVals={};$(function(){$(document).on("change",".sku_value",function(){getAlreadySetSkuVals();var s=[],t=1;$(".SKU_TYPE").each(function(){var l=$(this).children("li"),a={};a.skuTypeTitle=$(l).attr("sku-type-name");var e=$(l).attr("propid");a.skuTypeKey=e;$(l).attr("is_required");skuValueArr=[];var i=$(this).next(),c=$(i).find("input[type='checkbox'][class*='sku_value']"),u=0;$(c).each(function(){if($(this).is(":checked")){var s={};s.skuValueTitle=$(this).val(),s.skuValueId=$(this).attr("propvalid"),s.skuPropId=$(this).attr("propid"),skuValueArr.push(s),u++}}),skuValueArr&&skuValueArr.length>0&&(t*=skuValueArr.length,a.skuValues=skuValueArr,a.skuValueLen=skuValueArr.length,s.push(a))});var l="";l+="<table class='skuTable'><tr>";for(var a=0;a<s.length;a++)l+="<th>"+s[a].skuTypeTitle+"</th>";l+="<th>关联商品名称</th><th>关联商品upc</th><th>操作</th>",l+="</tr>";for(var e=0;e<t;e++){for(var i="",c=1,u=[],o=[],n=[],r=[],p=0;p<s.length;p++){var d=s[p].skuValues,h=d.length;c*=h;var v=t/c,x=e/v%h;r.push(s[p].skuTypeTitle),0==e%v?(i+="<td rowspan="+v+">"+d[x].skuValueTitle+"</td>",u.push(d[x].skuValueId),o.push(d[x].skuPropId),n.push(d[x].skuValueTitle)):(u.push(d[parseInt(x)].skuValueId),o.push(d[parseInt(x)].skuPropId),n.push(d[parseInt(x)].skuValueTitle))}var k=u.toString(),g="",m="";if(alreadySetSkuVals){var f=alreadySetSkuVals[k];f&&(g=f.skuPrice,m=f.skuStock)}l+="<tr propvalids='"+k+"' propids='"+o.toString()+"' propvalnames='"+n.join(";")+"'  propnames='"+r.join(";")+'\' class="sku_table_tr">'+i+"<td>"+g+"</td><td>"+m+'</td><td class="xuanze cursor"><span class="select">选择</span><span class="moren">默认</span></td></tr>'}l+="</table>",$("#skuTable").html(l)})}),$(".add-ggcs").click(function(){$(this).before("<div class='row jiage-wrap'><div class='row'><div class='col-md-5 row-xx gg-box'><h4 class='col-md-12 T1RRTittle'>规格标题:</h4><div class='input-box col-md-12 col-xs-12 input-box select-input'><input type='text' name='' placeholder='请输入商品名称' class='sl shuru'><span class='ts'>*请输入正确的出参数</span></div></div></div><div class='row jiage-wrap' style='padding-left:15px;position:relative;'><div class='col-md-5 row-xx gg-box' style='padding-left:0;'><h4 class='col-md-12 T1RRTittle'>规格名称：</h4><div class='input-box col-md-12 col-xs-12 input-box select-input'><input type='text' name='' placeholder='请输入商品名称' class='sl shuru'><span class='ts'>*请输入正确的出参数</span></div></div><div class='col-md-5 row-xx gg-box' style='padding-right:0;'><h4 class='col-md-12 col-xs-12 T1RRTittle'>规格内容：</h4><div class='input-box col-md-12 col-xs-12 input-box select-input'><input type='text' name='' placeholder='请输入商品名称' class='sl shuru'><span class='ts'>*请输入正确的出参数</span></div></div><span class='font_family icon-operation_delate col-md-1 cursor' style='font-size:24px;margin-top:45px;'></span></div><div class='col-md-6 row-xx add-mc' style='padding-left:0;'><h4 class='col-md-12 col-xs-12 T1RRTittle glyphicon glyphicon-plus cursor'>添加名称及内容</h4></div><hr class='col-md-10'></div>")}),$(".content-wrap").delegate(".add-mc","click",function(s){s.preventDefault(),$(this).before("<div class='row jiage-wrap' style='padding-left:15px;position:relative;'><div class='col-md-5 row-xx gg-box' style='padding-left:0;'><h4 class='col-md-12 T1RRTittle'>规格名称：</h4><div class='input-box col-md-12 col-xs-12 input-box select-input'><input type='text' name='' placeholder='请输入商品名称' class='sl shuru'><span class='ts'>*请输入正确的出参数</span></div></div><div class='col-md-5 row-xx gg-box' style='padding-right:0;'><h4 class='col-md-12 col-xs-12 T1RRTittle'>规格内容：</h4><div class='input-box col-md-12 col-xs-12 input-box select-input'><input type='text' name='' placeholder='请输入商品名称' class='sl shuru'><span class='ts'>*请输入正确的出参数</span></div></div><span class='font_family icon-operation_delate col-md-1 cursor' style='font-size:24px;margin-top:45px;'></span></div>")}),$(".sc-box").delegate("td.xuanze","click",function(s){s.preventDefault(),$(".del-box").show()}),$(".btn-close").click(function(){$(".del-box").hide()});
//# sourceMappingURL=addCommodity.js.map
